<div id="card-container" class="mt-4"></div>

<script>
    async function loadData() {
        try {
            // آپدیت عدد کل کانفیگ‌ها
            const resStats = await fetch('stats.txt');
            const statsText = await resStats.text();
            const total = statsText.split(',')[0].split(':')[1];
            document.querySelector('.badge-count').innerText = total + " مورد";

            // نمایش کارت‌ها مثل نمونه‌ای که فرستادی
            const resData = await fetch('data.json');
            const configs = await resData.json();
            const container = document.getElementById('card-container');
            container.innerHTML = '';

            configs.forEach((conf, index) => {
                const card = document.createElement('div');
                card.className = 'country-card d-block text-start mb-3';
                card.innerHTML = `
                    <div class="small opacity-50 mb-2">Config #${index + 1}</div>
                    <div class="text-truncate p-2 bg-dark rounded mb-2" style="font-size:10px;">${conf}</div>
                    <button class="btn btn-sm btn-primary w-100" onclick="copyText('${conf}')">کپی این کانفیگ</button>
                `;
                container.appendChild(card);
            });
        } catch (e) { console.log("در حال بارگذاری..."); }
    }

    function copyText(text) {
        navigator.clipboard.writeText(text);
        alert("کپی شد! ✅");
    }
    
    setInterval(loadData, 10000);
    loadData();
</script>
